<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Module List</title>
    <link rel="stylesheet" type="text/css" href="../../../css/lua.css">
</head>
<body>
	<pre><code id="1">use rlua::prelude::*;</code><code id="2">use heck::*;</code><code id="3"></code><code id="4">pub struct LuaCase(String);</code><code id="5"></code><code id="6">impl LuaUserData for LuaCase {</code><code id="7">    fn add_methods&lt;&#x27;lua, M: LuaUserDataMethods&lt;&#x27;lua, Self&gt;&gt;(methods: &amp;mut M) {</code><code id="8">        methods.add_method(&quot;to_camel&quot;, |_, this: &amp;LuaCase, _:()| {</code><code id="9">            Ok(this.0.to_camel_case())</code><code id="10">        });</code><code id="11">        methods.add_method(&quot;to_kebab&quot;, |_, this: &amp;LuaCase, _:()| {</code><code id="12">            Ok(this.0.to_kebab_case())</code><code id="13">        });</code><code id="14">        methods.add_method(&quot;to_mixed&quot;, |_, this: &amp;LuaCase, _:()| {</code><code id="15">            Ok(this.0.to_mixed_case())</code><code id="16">        });</code><code id="17">        methods.add_method(&quot;to_shouty_snake&quot;, |_, this: &amp;LuaCase, _:()| {</code><code id="18">            Ok(this.0.to_shouty_snake_case())</code><code id="19">        });</code><code id="20">        methods.add_method(&quot;to_snake&quot;, |_, this: &amp;LuaCase, _:()| {</code><code id="21">            Ok(this.0.to_snake_case())</code><code id="22">        });</code><code id="23">        methods.add_method(&quot;to_title&quot;, |_, this: &amp;LuaCase, _:()| {</code><code id="24">            Ok(this.0.to_title_case())</code><code id="25">        });</code><code id="26">    }</code><code id="27">}</code><code id="28"></code><code id="29">pub fn init(lua: &amp;Lua) -&gt; crate::Result&lt;()&gt; {</code><code id="30"></code><code id="31">    let module = lua.create_table()?;</code><code id="32"></code><code id="33">    module.set(&quot;new&quot;, lua.create_function(|_, text: String| {</code><code id="34">        Ok(LuaCase(text))</code><code id="35">    })?)?;</code><code id="36"></code><code id="37">    lua.globals().set(&quot;case&quot;, module)?;</code><code id="38"></code><code id="39">    Ok(())</code><code id="40">}</code><code id="41"></code><code id="42">#[cfg(test)]</code><code id="43">mod tests {</code><code id="44">    use super::*;</code><code id="45"></code><code id="46">    #[test]</code><code id="47">    fn lua_cambel () {</code><code id="48">        let lua = Lua::new();</code><code id="49">        init(&amp;lua).unwrap();</code><code id="50"></code><code id="51">        lua.exec::&lt;_, ()&gt;(r#&quot;</code><code id="52">            local val = case.new(&quot;We are not in the least afraid of ruins&quot;)</code><code id="53">            assert(val:to_camel() == &quot;WeAreNotInTheLeastAfraidOfRuins&quot;)</code><code id="54">        &quot;#, None).unwrap();</code><code id="55">    }</code><code id="56"></code><code id="57">    #[test]</code><code id="58">    fn lua_kebab () {</code><code id="59">        let lua = Lua::new();</code><code id="60">        init(&amp;lua).unwrap();</code><code id="61"></code><code id="62">        lua.exec::&lt;_, ()&gt;(r#&quot;</code><code id="63">            local val = case.new(&quot;We are going to inherit the earth&quot;)</code><code id="64">            assert(val:to_kebab() == &quot;we-are-going-to-inherit-the-earth&quot;)</code><code id="65">        &quot;#, None).unwrap();</code><code id="66">    }</code><code id="67"></code><code id="68">    #[test]</code><code id="69">    fn lua_mixed () {</code><code id="70">        let lua = Lua::new();</code><code id="71">        init(&amp;lua).unwrap();</code><code id="72"></code><code id="73">        lua.exec::&lt;_, ()&gt;(r#&quot;</code><code id="74">            local val = case.new(&quot;It is we who built these palaces and cities&quot;)</code><code id="75">            assert(val:to_mixed() == &quot;itIsWeWhoBuiltThesePalacesAndCities&quot;)</code><code id="76">        &quot;#, None).unwrap();</code><code id="77">    }</code><code id="78"></code><code id="79">    #[test]</code><code id="80">    fn lua_shouty() {</code><code id="81">        let lua = Lua::new();</code><code id="82">        init(&amp;lua).unwrap();</code><code id="83"></code><code id="84">        lua.exec::&lt;_, ()&gt;(r#&quot;</code><code id="85">            local val = case.new(&quot;That world is growing in this minute&quot;)</code><code id="86">            assert(val:to_shouty_snake() == &quot;THAT_WORLD_IS_GROWING_IN_THIS_MINUTE&quot;)</code><code id="87">        &quot;#, None).unwrap();</code><code id="88">    }</code><code id="89"></code><code id="90">    #[test]</code><code id="91">    fn lua_snake () {</code><code id="92">        let lua = Lua::new();</code><code id="93">        init(&amp;lua).unwrap();</code><code id="94"></code><code id="95">        lua.exec::&lt;_, ()&gt;(r#&quot;</code><code id="96">            local val = case.new(&quot;We carry a new world here, in our hearts&quot;)</code><code id="97">            assert(val:to_snake() == &quot;we_carry_a_new_world_here_in_our_hearts&quot;)</code><code id="98">        &quot;#, None).unwrap();</code><code id="99">    }</code><code id="100"></code><code id="101">    #[test]</code><code id="102">    fn lua_title () {</code><code id="103">        let lua = Lua::new();</code><code id="104">        init(&amp;lua).unwrap();</code><code id="105"></code><code id="106">        lua.exec::&lt;_, ()&gt;(r#&quot;</code><code id="107">            local val = case.new(&quot;We have always lived in slums and holes in the wall&quot;)</code><code id="108">            assert(val:to_title() == &quot;We Have Always Lived In Slums And Holes In The Wall&quot;)</code><code id="109">        &quot;#, None).unwrap();</code><code id="110">    }</code><code id="111">}</code></pre>
</body>
</html>
