<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Module List</title>
    <link rel="stylesheet" type="text/css" href="../../../css/lua.css">
</head>
<body>
	<pre><code id="1">use rlua::prelude::*;</code><code id="2">use serde_yaml;</code><code id="3">use rlua_serde;</code><code id="4">use Result;</code><code id="5"></code><code id="6">pub fn init(lua: &amp;Lua) -&gt; Result&lt;()&gt; {</code><code id="7">    &#x2F;&#x2F; Decode string to a table</code><code id="8">    let module = lua.create_table()?;</code><code id="9">    module.set(&quot;to_table&quot;, lua.create_function(|lua, text: String| {</code><code id="10">        let doc: serde_yaml::Value = serde_yaml::from_str(&amp;text).map_err(LuaError::external)?;</code><code id="11">        let lua_value = rlua_serde::to_value(lua, &amp;doc)?;</code><code id="12"></code><code id="13">        Ok(lua_value)</code><code id="14">    })?)?;</code><code id="15"></code><code id="16">    &#x2F;&#x2F; Encode table to a string</code><code id="17">    module.set(&quot;from_table&quot;, lua.create_function(|_, value: LuaValue| {</code><code id="18">        let lua_value: serde_yaml::Value = rlua_serde::from_value(value)?;</code><code id="19">        let string = serde_yaml::to_string(&amp;lua_value).map_err(LuaError::external)?;</code><code id="20"></code><code id="21">        Ok(string)</code><code id="22">    })?)?;</code><code id="23"></code><code id="24">    lua.globals().set(&quot;yaml&quot;, module)?;</code><code id="25"></code><code id="26">    Ok(())</code><code id="27">}</code><code id="28"></code></pre>
</body>
</html>
